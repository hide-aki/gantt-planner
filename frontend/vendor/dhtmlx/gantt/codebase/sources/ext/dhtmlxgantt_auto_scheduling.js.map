{"version":3,"file":"dhtmlxgantt_auto_scheduling.js","sources":["dhtmlxgantt_auto_scheduling.js"],"names":["gantt","_formatLink","link","relations","target","this","_get_link_target","source","_get_link_source","isChildOf","id","_isProject","from","_getImplicitLinks","c","respectTargetOffset","config","auto_scheduling_move_projects","targetDates","getSubtaskDates","start_date","end_date","to","$target","length","calculateDuration","roundDate","i","fromTask","j","toTask","lag","subtaskLink","copy","task","push","_convertToFinishToStartLink","parent","selectOffset","eachTask","_getDirectDependencies","selectSuccessors","links","successors","linksIds","$source","getLink","isTaskExists","concat","_getInheritedDependencies","inheritedRelations","_eachParent","apply","relProperty","_getDirectSuccessors","_getInheritedSuccessors","_getDirectPredecessors","_getInheritedPredecessors","_getSuccessors","_getPredecessors","sourceTask","targetTask","res","finish_to_start","preferredStart","additionalLag","type","start_to_start","duration","finish_to_finish","start_to_finish","auto_scheduling","auto_scheduling_descendant_links","auto_scheduling_initial","auto_scheduling_strict","_forEach","arr","callback","workArray","slice","_arrayMap","resArray","_autoSchedulingGraph","getVertices","ids","rel","vertices","sort","a","b","getGlobalTaskIndex","topologicalSort","edges","hash","reduce","summ","value","$incoming","successor","S","filter","v","L","n","pop","node","m","tarjanStronglyConnectedComponents","strongConnect","vertexId","previousLink","getVertex","index","lowLink","connectedEdges","onStack","edge","w","undefined","Math","min","connectedComponent","tasks","connectedComponents","verticesHash","vertex","_autoSchedulingPath","getKey","join","getVirtualRoot","mixin","root_id","types","project","$virtual","filterDuplicates","keys","key","splice","getLinkedTasks","includePredecessors","startIds","visited","_getLinkedTasks","rootTask","visitedTasks","rootObj","getTask","chainRelations","children","getChildren","findLoops","cycles","graph","component","_autoSchedulingDateResolver","isFirstSmaller","small","big","valueOf","_hasDuration","isSmallerOrDefault","smallDate","bigDate","resolveRelationDate","taskId","getEndDate","minStart","linkId","defaultStart","relation","constraintDate","getConstraintDate","new_start","calculateEndDate","_autoSchedulingPlanner","generatePlan","getPredecessorEndDate","plan","plansHash","duration_unit","getClosestWorkTime","date","dir","orderedIds","predecessorRelations","dateResolver","result","currentId","applyProjectPlan","projectPlan","predecessor","updateTasks","newDate","callEvent","_autoSchedulingPreferredDates","startTask","Date","_autoSchedule","updateCallback","_autoscheduling_in_progress","path","updatedTasks","planner","autoSchedule","inclusive","_finalizeAutoSchedulingChanges","batchUpdate","updateTask","isCircularLink","_getConnectedGroup","manager","allRelations","isLinkExists","found","findCycles","_attachAutoSchedulingHandlers","_autoScheduleAfterLinkChange","attachEvent","_preventCircularLink","_preventDescendantLink","_datesNotEqual","dateA","dateB","_notEqualTaskDates","task1","task2","milestone","movedTask","mode","_autoScheduleAfterDND","newTask","_lightBoxChangesHandler","oldTask","_autoschedule_lightbox_id","_lightBoxSaveHandler"],"mappings":"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"}