{"version":3,"file":"dhtmlxgantt_auto_scheduling.js","sources":["dhtmlxgantt_auto_scheduling.js"],"names":["gantt","_formatLink","link","relations","target","this","_get_link_target","source","_get_link_source","isChildOf","id","_isProject","from","_getImplicitLinks","c","respectTargetOffset","config","auto_scheduling_move_projects","targetDates","getSubtaskDates","start_date","end_date","to","$target","length","getState","drag_id","calculateDuration","task","i","fromTask","j","toTask","lag","subtaskLink","type","push","_convertToFinishToStartLink","parent","selectOffset","eachTask","_getDirectDependencies","selectSuccessors","links","successors","linksIds","$source","getLink","isTaskExists","concat","_getInheritedDependencies","inheritedRelations","_eachParent","apply","relProperty","_getDirectSuccessors","_getInheritedSuccessors","_getDirectPredecessors","_getInheritedPredecessors","_getSuccessors","_getPredecessors","sourceTask","targetTask","res","finish_to_start","preferredStart","additionalLag","start_to_start","duration","finish_to_finish","start_to_finish","auto_scheduling","auto_scheduling_descendant_links","auto_scheduling_initial","auto_scheduling_strict","_forEach","arr","callback","workArray","slice","_arrayMap","resArray","_autoSchedulingGraph","getVertices","ids","rel","vertices","sort","a","b","getGlobalTaskIndex","topologicalSort","edges","hash","$incoming","successor","S","filter","v","L","n","pop","node","m","tarjanStronglyConnectedComponents","strongConnect","vertexId","previousLink","getVertex","index","lowLink","connectedEdges","onStack","edge","w","undefined","Math","min","connectedComponent","tasks","connectedComponents","verticesHash","vertex","_autoSchedulingPath","getKey","join","getVirtualRoot","mixin","root_id","types","project","$virtual","filterDuplicates","keys","key","splice","getLinkedTasks","includePredecessors","startIds","visited","_getLinkedTasks","rootTask","visitedTasks","rootObj","getTask","chainRelations","children","getChildren","findLoops","cycles","graph","component","_autoSchedulingDateResolver","isFirstSmaller","small","big","valueOf","_hasDuration","isSmallerOrDefault","smallDate","bigDate","resolveRelationDate","taskId","getEndDate","minStart","linkId","defaultStart","relation","constraintDate","getConstraintDate","getClosestWorkTime","date","dir","new_start","calculateEndDate","_autoSchedulingPlanner","generatePlan","getPredecessorEndDate","plan","plansHash","orderedIds","predecessorRelations","dateResolver","result","currentId","isLinkExists","predecessor","callEvent","applyProjectPlan","projectPlan","updateTasks","newDate","_autoSchedulingPreferredDates","startTask","Date","_autoSchedule","updateCallback","_autoscheduling_in_progress","path","updatedTasks","planner","autoSchedule","inclusive","_finalizeAutoSchedulingChanges","resetTime","batchUpdate","start","end","resetProjectDates","payload","updateTask","isCircularLink","_getConnectedGroup","manager","allRelations","found","findCycles","_attachAutoSchedulingHandlers","resetToStartLinksLags","skipped","originalLink","presentLinks","updatedLinks","_autoScheduleAfterLinkChange","attachEvent","_preventCircularLink","_preventDescendantLink","_datesNotEqual","dateA","dateB","taskA","taskB","_notEqualTaskDates","task1","task2","milestone","movedTask","mode","_autoScheduleAfterDND","newTask","_lightBoxChangesHandler","oldTask","_autoschedule_lightbox_id","_lightBoxSaveHandler"],"mappings":"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"}