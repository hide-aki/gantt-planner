{"version":3,"file":"dhtmlxgantt_auto_scheduling.js","sources":["dhtmlxgantt_auto_scheduling.js"],"names":["gantt","_formatLink","link","relations","target","this","_get_link_target","source","_get_link_source","isChildOf","id","_isProject","from","_getImplicitLinks","c","respectTargetOffset","config","auto_scheduling_move_projects","targetDates","getSubtaskDates","start_date","end_date","to","$target","length","getState","drag_id","calculateDuration","roundDate","i","fromTask","j","toTask","lag","subtaskLink","type","task","push","_convertToFinishToStartLink","parent","selectOffset","eachTask","_getDirectDependencies","selectSuccessors","links","successors","linksIds","$source","getLink","isTaskExists","concat","_getInheritedDependencies","inheritedRelations","_eachParent","apply","relProperty","_getDirectSuccessors","_getInheritedSuccessors","_getDirectPredecessors","_getInheritedPredecessors","_getSuccessors","_getPredecessors","sourceTask","targetTask","res","finish_to_start","preferredStart","additionalLag","start_to_start","duration","finish_to_finish","start_to_finish","auto_scheduling","auto_scheduling_descendant_links","auto_scheduling_initial","auto_scheduling_strict","_forEach","arr","callback","workArray","slice","_arrayMap","resArray","_autoSchedulingGraph","getVertices","ids","rel","vertices","sort","a","b","getGlobalTaskIndex","topologicalSort","edges","hash","$incoming","successor","S","filter","v","L","n","pop","node","m","tarjanStronglyConnectedComponents","strongConnect","vertexId","previousLink","getVertex","index","lowLink","connectedEdges","onStack","edge","w","undefined","Math","min","connectedComponent","tasks","connectedComponents","verticesHash","vertex","_autoSchedulingPath","getKey","join","getVirtualRoot","mixin","root_id","types","project","$virtual","filterDuplicates","keys","key","splice","getLinkedTasks","includePredecessors","startIds","visited","_getLinkedTasks","rootTask","visitedTasks","rootObj","getTask","chainRelations","children","getChildren","findLoops","cycles","graph","component","_autoSchedulingDateResolver","isFirstSmaller","small","big","valueOf","_hasDuration","isSmallerOrDefault","smallDate","bigDate","resolveRelationDate","taskId","getEndDate","minStart","linkId","defaultStart","relation","constraintDate","getConstraintDate","new_start","calculateEndDate","_autoSchedulingPlanner","generatePlan","getPredecessorEndDate","plan","plansHash","duration_unit","getClosestWorkTime","date","dir","orderedIds","predecessorRelations","dateResolver","result","currentId","isLinkExists","predecessor","callEvent","applyProjectPlan","projectPlan","updateTasks","newDate","_autoSchedulingPreferredDates","startTask","Date","_autoSchedule","updateCallback","_autoscheduling_in_progress","path","updatedTasks","planner","autoSchedule","inclusive","_finalizeAutoSchedulingChanges","batchUpdate","updateTask","isCircularLink","_getConnectedGroup","manager","allRelations","found","findCycles","_attachAutoSchedulingHandlers","_autoScheduleAfterLinkChange","attachEvent","_preventCircularLink","_preventDescendantLink","_datesNotEqual","dateA","dateB","_notEqualTaskDates","task1","task2","milestone","movedTask","mode","_autoScheduleAfterDND","newTask","_lightBoxChangesHandler","oldTask","_autoschedule_lightbox_id","_lightBoxSaveHandler"],"mappings":"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"}